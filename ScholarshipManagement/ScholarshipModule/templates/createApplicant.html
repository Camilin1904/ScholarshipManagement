<!DOCTYPE html>
{% load static %}

<head>
       
    <meta charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=Noto Music' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'CSS/createApplicant.css' %}">
    {% block links %}
    {% endblock %}
    <title>
        Creación Aplicante
    </title>
</head>

    <body>
        <header>
            <img src="{% static './Icons/icesi.png' %}" class="icesi">
            <div class="menu">
                <ul>
                        <li><a href="/home"><i class="bi bi-house"></i>  Home</a></li>
                        <li><a href=""><i class="bi bi-cloud-arrow-up"></i>  Subir</a></li>
                        <li><a href="/logout"><i class="bi bi-box-arrow-left"></i>  Salir</a></li>
                </ul>              
            </div>  
          
        </header>

        <div id="content">
            
        
            <form action='/applicants/create/' method = "POST" id="create1" enctype="multipart/form-data">
            <div class="container">

                
                {% csrf_token %}
            
                <div id="step1">
                    <h2 id="registerApplicant">Registro del aplicante</h2>
                    {% for field in form %}
                    {% if forloop.counter < 5 %}
                    <div id="id_{{forloop.counter}}" class="items">
                    
                        {{ field.label_tag }}<br>
                        {{ field }}
                    </div>
                    {% endif %}
                    {% endfor %}
                    <label for="id_image" id="image_label">Foto del estudiante:</label>
                    
                    <div class="inputForm" id="container_image">

                        <input type="file" id="image"  accept="image/*" name="image">
                        <div>
                        
                            <label for="image" id="customFileButton">Seleccionar archivo</label>
                        </div>
                    </div>

                    <button type="button" id="nextButton" class="button">Siguiente</button>
                    <br>
                </div>
            

                
                <div id="step2" style="display: none;">
                    <h2 id="registerApplicant">Registro del aplicante</h2>
                    {% for field in form2 %}
        
                    <div id="id_{{forloop.counter}}" class="items">
                    
                        {{ field.label_tag }}<br>
                        {{ field }}
                    </div>
            
                    {% endfor %}
                    <button type="submit" id="goBack" class="button" style="display: none;">Atrás</button>
                    <button type="submit" id="save" class="button" style="display: none;">Guardar</button>
                <br>
                
                </div>
                

               
            </form>
            </div>


            {% if error == ""%}
                    
            {% else %}
                <div class="alert" style="font-size: 85%; ">
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                    <strong>Advertencia</strong> {{error}}
                </div>
            {% endif%} 



            <script>
                const imageContainer = document.getElementById("container_image");
                const imageInput = document.getElementById("image");
                const customFileButton = document.getElementById("customFileButton");
                const step1 = document.getElementById("step1");
                const step2 = document.getElementById("step2");
                
                const imagePath = "{% static './Icons/cam.png' %}";
                imageContainer.style.backgroundImage = 'url(' + imagePath + ')';

                imageInput.addEventListener("change", function () {
                    const file = this.files[0];
                    if (file) {
                    
                        imageInput.style.display = "none";
                        
                        const reader = new FileReader();
            
                        reader.onload = function (e) {
                            const imageUrl = e.target.result;
                            imageContainer.style.backgroundImage = 'url(' + imageUrl + ')';
                            
                        };
                
                        reader.readAsDataURL(file);
                    } else {
                        const imagePath = "{% static './Icons/cam.png' %}";
                        imageContainer.style.backgroundImage = 'url(' + imagePath + ')';
                        
                    }
                });
                
                customFileButton.addEventListener("click", function () {
                    imageInput.click();
                });

                nextButton.addEventListener("click", function () {
                step1.style.display = "none";
                step2.style.display = "";
                save.style.display = "";
                goBack.style.display = "";
                nextButton.style.display = "none";
                
                });
                            
                goBack.addEventListener("click", function () {
                step1.style.display  = "";
                step2.style.display = "none";
                save.style.display = "none";
                goBack.style.display = "none";
                nextButton.style.display = "";
                

                });

                </script>

   
               
        </div>  
    </body>

